
xwayland enable

input type:keyboard {
	repeat_delay 200
	repeat_rate 40
	xkb_layout fr-devel
	xkb_numlock enabled
	xkb_capslock disabled
}

input 4176:1031:Yubico_YubiKey_OTP+FIDO+CCID {
	xkb_layout us
}

input type:touchpad {
	tap enabled
	dwt enabled
	drag enabled
	pointer_accel 0.35
	middle_emulation enabled
}

seat * keyboard_grouping smart
output * bg ~/.wallpaper.png center #0e1624

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Terminus 12

titlebar_padding 5 2

# only change focus with keyboard
focus_follows_mouse no

# Use pactl to adjust volume in PulseAudio.
bindsym XF86AudioRaiseVolume exec ~/bin/volume -x 100 -P -e 1000 -n up 10
bindsym XF86AudioLowerVolume exec ~/bin/volume -x 100 -P -e 1000 -n down 10
bindsym XF86AudioMute exec ~/bin/volume -x 100 -P -e 1000 -n mute
bindsym XF86MonBrightnessDown exec ~/bin/backlight.sh -
bindsym XF86MonBrightnessUp exec ~/bin/backlight.sh +

# Use Mouse+Mod4 to drag floating windows to their wanted position
floating_modifier Mod4

# start a terminal
bindsym Mod4+Return exec footclient

# kill focused window
bindsym Mod4+Shift+k kill

# run program
bindsym Mod4+d exec wofi
bindsym Mod4+l exec loginctl lock-session

# change focus
bindsym Mod4+Left focus left
bindsym Mod4+Prior focus left
bindsym Mod4+Down focus down
bindsym Mod4+Up focus up
bindsym Mod4+Right focus right
bindsym Mod4+Next focus right

# move focused window
bindsym Mod4+Shift+Left move left
bindsym Mod4+Shift+Prior move left
bindsym Mod4+Shift+Down move down
bindsym Mod4+Shift+Up move up
bindsym Mod4+Shift+Right move right
bindsym Mod4+Shift+Next move right

# split current container
bindsym Mod4+h split vertical
bindsym Mod4+v split horizontal

# enter fullscreen mode for the focused container
bindsym Mod4+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
workspace_layout tabbed
bindsym Mod4+z layout tabbed
bindsym Mod4+e layout toggle split

# toggle tiling / floating
bindsym Mod4+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym Mod4+space focus mode_toggle
bindsym Mod4+Shift+at move scratchpad
bindsym Mod4+at scratchpad show

# screenshots
bindsym Mod4+p        exec grimshot save area ~/screenshot.png
bindsym Mod4+Shift+p   exec grimshot save window ~/screenshot.png

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1:term"
set $ws2 "2:www-work"
set $ws3 "3:www-perso"
set $ws4 "4:comms"
set $ws5 "5:music"
set $ws6 "6:email"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym Mod4+ampersand workspace number $ws1
bindsym Mod4+eacute workspace number $ws2
bindsym Mod4+quotedbl workspace number $ws3
bindsym Mod4+apostrophe workspace number $ws4
bindsym Mod4+parenleft workspace number $ws5
bindsym Mod4+minus workspace number $ws6
bindsym Mod4+egrave workspace number $ws7
bindsym Mod4+underscore workspace number $ws8
bindsym Mod4+ccedilla workspace number $ws9
bindsym Mod4+agrave workspace number $ws10
bindsym Ctrl+Mod4+Left workspace prev
bindsym Mod4+Delete workspace prev
bindsym Ctrl+Mod4+Right workspace next
bindsym Mod4+End workspace next

# move focused container to workspace
bindsym Mod4+Shift+ampersand move container to workspace number $ws1
bindsym Mod4+Shift+eacute move container to workspace number $ws2
bindsym Mod4+Shift+quotedbl move container to workspace number $ws3
bindsym Mod4+Shift+apostrophe move container to workspace number $ws4
bindsym Mod4+Shift+parenleft move container to workspace number $ws5
bindsym Mod4+Shift+minus move container to workspace number $ws6
bindsym Mod4+Shift+egrave move container to workspace number $ws7
bindsym Mod4+Shift+underscore move container to workspace number $ws8
bindsym Mod4+Shift+ccedilla move container to workspace number $ws9
bindsym Mod4+Shift+agrave move container to workspace number $ws10

# reload the configuration file
bindsym Mod4+Shift+c exec swaymsg reload

set $exit "EXIT sway? [y/N]"
mode $exit {
	bindsym y exit
	bindsym n mode "default"
	bindsym q mode "default"
	bindsym Space mode "default"
	bindsym Escape mode "default"
	bindsym Return mode "default"
}
bindsym Mod4+Shift+e mode $exit

# resize window (you can also use the mouse for that)
mode "resize" {
	# These bindings trigger as soon as you enter the resize mode

	# Pressing left will shrink the window’s width.
	# Pressing right will grow the window’s width.
	# Pressing up will shrink the window’s height.
	# Pressing down will grow the window’s height.
	bindsym Left resize shrink width 10 px or 10 ppt
	bindsym Down resize grow height 10 px or 10 ppt
	bindsym Up resize shrink height 10 px or 10 ppt
	bindsym Right resize grow width 10 px or 10 ppt

	# back to normal: Enter or Escape or Mod4+r
	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym Mod4+r mode "default"
}

bindsym Mod4+r mode "resize"

exec swayidle -w \
	timeout 600 'loginctl lock-session' \
	timeout 700 'swaymsg "output * dpms off"' \
	resume 'swaymsg "output * dpms on"' \
	lock swaylock \
	before-sleep swaylock

for_window [app_id="pavucontrol"] floating enable
for_window [app_id="nm-connection-editor"] floating enable
for_window [class="vlc"] inhibit_idle fullscreen
for_window [class="Hexchat"] move scratchpad, sticky enable
for_window [app_id="google-chrome"] move container to workspace number $ws2
for_window [app_id="firefox.*"] move container to workspace number $ws3
for_window [title="Signal"] move container to workspace number $ws4
for_window [class="Spotify"] move container to workspace number $ws5
for_window [app_id="org.clementine_player.Clementine"] move container to workspace number $ws5
for_window [app_id="aerc"] move container to workspace number $ws6
for_window [app_id="calc"] floating enable

include /etc/sway/config.d/*

bindsym Mod4+c exec footclient -T calc -a calc calc

exec loginctl lock-session
# startup apps
exec kanshi
exec foot -s 2>/dev/null
exec sleep 1 && footclient
exec hexchat
exec google-chrome
exec firefox
exec signal-desktop --disable-seccomp-filter-sandbox --enable-features=UseOzonePlatform --ozone-platform=wayland
exec spotify
exec sleep 1 && footclient -a aerc bash -c 'cd ~/upstream/aerc; aerc; exec bash -li'
